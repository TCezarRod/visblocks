(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{397:function(e,t,a){e.exports=a.p+"static/media/bar_chart.58b0ada6.svg"},398:function(e,t,a){e.exports=a.p+"static/media/scatter_plot.d510e4c9.svg"},399:function(e,t,a){e.exports=a.p+"static/media/line_chart.4aa84470.svg"},400:function(e,t,a){e.exports=a.p+"static/media/map_pin.7a5a7453.svg"},401:function(e,t,a){e.exports=a.p+"static/media/data.76354149.svg"},402:function(e,t,a){e.exports=a.p+"static/media/table.de925bed.svg"},403:function(e,t,a){e.exports=a.p+"static/media/pie_chart.a546b0e2.svg"},474:function(e,t,a){e.exports=a(891)},482:function(e,t,a){},891:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(36),i=a(28),c=a(194),l=a(70),s=a(4),d={controlState:{connecting:!1,sourceId:-1,selected:-1,options:{}},arrowsState:{lastId:0,arrows:{}},dataState:{data:{}},blocksState:{lastId:1,blocks:{}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e.arrowsState.arrows),n=Object.assign({},e.blocksState.blocks),r=Object.assign({},e.dataState.data),o=Object.assign({},e.controlState.options),i=function(){switch(t.type){case"MOVE_ARROW_END":return a[t.payload.id].xe=t.payload.x,a[t.payload.id].ye=t.payload.y,{v:Object(s.a)({},e,{arrowsState:Object(s.a)({},e.arrowsState,{arrows:a})})};case"MOVE_ARROW_START":return a[t.payload.id].xi=t.payload.x,a[t.payload.id].yi=t.payload.y,{v:Object(s.a)({},e,{arrowsState:Object(s.a)({},e.arrowsState,{arrows:a})})};case"ADD_ARROW":return Object.keys(a).forEach(function(e){a[e].endBlock===t.payload.arrow.endBlock&&delete a[e]}),n[t.payload.arrow.startBlock].forwardId||(n[t.payload.arrow.startBlock].forwardId=[]),n[t.payload.arrow.startBlock].forwardId.push(t.payload.arrow.endBlock),a[e.arrowsState.lastId]=t.payload.arrow,{v:Object(s.a)({},e,{arrowsState:Object(s.a)({},e.arrowsState,{arrows:a,lastId:e.arrowsState.lastId+1}),blocksState:Object(s.a)({},e.blocksState,{blocks:n})})};case"ADD_ARROW":var i=n[a[t.payload.id]].forwardId.indexOf(a[t.payload.id].endBlock);return i>-1&&n[a[t.payload.id]].forwardId.splice(i,1),delete a[t.payload.id],{v:Object(s.a)({},e,{arrowsState:Object(s.a)({},e.arrowsState,{arrows:a}),blocksState:Object(s.a)({},e.blocksState,{blocks:n})})};case"MOVE_BLOCK":var c=t.payload.props,d=c.position,u=c.size;return n[t.payload.id].props.position={left:d.x,top:d.y},n[t.payload.id].props.size=u,Object.values(a).forEach(function(e){e.startBlock===t.payload.id&&(e.xi=d.x+u.width,e.yi=d.y+u.height/2),e.endBlock===t.payload.id&&(e.xe=d.x,e.ye=d.y+u.height/2)}),{v:Object(s.a)({},e,{arrowsState:Object(s.a)({},e.arrowsState,{arrows:a}),blocksState:Object(s.a)({},e.blocksState,{blocks:n})})};case"CREATE_BLOCK":var p=e.blocksState.lastId;return n[p]=Object(s.a)({},t.payload.block,{id:p}),t.payload.data&&(r=Object(s.a)({},r,Object(l.a)({},p,{data:t.payload.data})),t.payload.isInput?(r[p].type="input",n[p].input=t.payload.data):(r[p].type="data",n[p].data=t.payload.data)),{v:Object(s.a)({},e,{blocksState:Object(s.a)({},e.blocksState,{blocks:n,lastId:e.blocksState.lastId+1}),dataState:Object(s.a)({},e.dataState,{data:r})})};case"DELETE_BLOCK":for(var f=n[t.payload.id],m=function(e){return delete r[e]};f&&(f.data||f.input)&&f.forwardId&&f.forwardId.length>0;)f.forwardId.forEach(function(e){return m(e)}),f=f[f.forwardId];return delete n[t.payload.id],delete r[t.payload.id],delete o[t.payload.id],Object.keys(a).forEach(function(e){a[e].endBlock!==t.payload.id&&a[e].startBlock!==t.payload.id||delete a[e]}),{v:Object(s.a)({},e,{blocksState:Object(s.a)({},e.blocksState,{blocks:n}),arrowsState:Object(s.a)({},e.arrowsState,{arrows:a}),dataState:Object(s.a)({},e.dataState,{data:r}),controlState:Object(s.a)({},e.controlState,{options:o})})};case"UPDATE_DATA":var h=t.payload.id;return n[h]&&(r=Object(s.a)({},r,Object(l.a)({},h,Object(s.a)({},r[h]))),t.payload.isInput?(r[h]={type:"input",data:t.payload.source},n[h].input=t.payload.source):t.payload.isSelection?function(){r[h].selection=t.payload.source;for(var e=n[h],a=function(e){r[e]&&(r[e].selection=[])};e&&e.forwardId&&e.forwardId.length>0;)e.forwardId.forEach(function(e){return a(e)}),e=e[e.forwardId]}():(r[h]={type:"data",data:t.payload.source},n[h].data=t.payload.source)),{v:Object(s.a)({},e,{blocksState:Object(s.a)({},e.blocksState,{blocks:n}),dataState:Object(s.a)({},e.dataState,{data:r})})};case"ENABLE_CONNECT":return{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{connecting:!0,sourceId:t.payload.id,selected:t.payload.id})})};case"FINISH_CONNECT":return{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{connecting:!1,sourceId:-1})})};case"SELECT_BLOCK":return{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{selected:t.payload.id})})};case"INITIALIZE_OPTIONS":var b=Object.assign({attributes:[]},t.payload.attributes);return Object.keys(t.payload.attributes).forEach(function(e){b.attributes.push(e),b[e].selected=void 0}),o[t.payload.id]=b,{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{options:o})})};case"UPDATE_ATTRIBUTE_VALUES":return o[t.payload.id][t.payload.attribute].values=t.payload.newValues,{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{options:o})})};case"UPDATE_ATTRIBUTE_SELECTION":return o[t.payload.id][t.payload.attribute].selected=t.payload.value,{v:Object(s.a)({},e,{controlState:Object(s.a)({},e.controlState,{options:o})})};default:return{v:e}}}();if("object"===typeof i)return i.v},p=Object(c.b)(u),f=(a(482),a(16)),m=a(17),h=a(19),b=a(18),y=a(20),v=function(e){return{type:"DELETE_BLOCK",payload:{id:e}}},g=function(e,t){return{type:"INITIALIZE_OPTIONS",payload:{id:e,attributes:t}}},O=function(e,t,a){return{type:"UPDATE_ATTRIBUTE_VALUES",payload:{id:e,attribute:t,newValues:a}}},k=function(e,t,a){return{type:"UPDATE_ATTRIBUTE_SELECTION",payload:{id:e,attribute:t,value:a}}},E=a(901),j=a(907),S=a(906),C=a(904),w=a(908),A=a(385),x=a(905),N=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).finishMutation=function(){a.props.onSelection(a.props.blockid,{type:"selection",data:a.props.data}),a.setState({externalMutations:void 0})},a.state={data:[],groupBy:0,range:void 0,domain:void 0,externalMutations:void 0,finishMutation:a.finishMutation},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Scatter Plot"},domain:{type:"selection",values:[],default:0},range:{type:"selection",values:[],default:1},size:{type:"number",default:6},"use default color":{type:"toggle",default:!0,hidden:!1},color:{type:"color",default:"rgba(100, 0, 40, 0.7)"},"selection color":{type:"color",default:"rgba(100, 200, 0, 0.7)"},"group by":{type:"selection",values:[],default:0},"group color":{type:"colorArray",default:["#ff0029AA","#377eb8AA","#66a61eAA","#984ea3AA","#00d2d5AA","#ff7f00AA","#af8d00AA","#7f80cdAA","#b3e900AA","#c42e60AA"],values:[]}})},a.removeMutation=function(){a.setState({externalMutations:void 0})},a.getDomain=function(){var e=a.props.options[a.props.blockid],t=e.domain.selected||e.domain.default,n=e.domain.values[t],r=Math.min.apply(Math,a.state.data.map(function(e){return Number(e[n])}).filter(function(e){return!isNaN(e)})),o=Math.max.apply(Math,a.state.data.map(function(e){return Number(e[n])}).filter(function(e){return!isNaN(e)})),i=e.range.selected||e.range.default,c=e.range.values[i];return{x:[r,o],y:[Math.min.apply(Math,a.state.data.map(function(e){return Number(e[c])}).filter(function(e){return!isNaN(e)})),Math.max.apply(Math,a.state.data.map(function(e){return Number(e[c])}).filter(function(e){return!isNaN(e)}))]}},a.updateOutput=function(e,t,n){e[0].data.forEach(function(e){delete e._x,delete e._y,delete e.eventKey,delete e.x,delete e.y}),a.props.onSelection&&a.props.onSelection(a.props.blockid,{type:"selection",data:e[0].data})},a.resetOutput=function(){a.props.onSelection&&a.props.onSelection(a.props.blockid,{type:"selection",data:[]})},a.labelStyle={fill:"rgb(69, 90, 100)",fontFamily:'Roboto, "Helvetica Neue", Helvetica, sans-serif',fontSize:"12px",stroke:"transparent",strokeWidth:"0",textAnchor:"middle"},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.options[this.props.blockid];if(this.props.data){var t=e.domain.selected||e.domain.default,a=e.range.selected||e.range.default;return r.a.createElement(E.a,{externalEventMutations:this.state.externalMutations,theme:j.a.material,domain:this.getDomain(),width:this.props.width,height:this.props.height,containerComponent:r.a.createElement(S.a,{onSelection:this.updateOutput,onSelectionCleared:this.resetOutput}),domainPadding:15},r.a.createElement(C.a,{name:"ScatterPlot",externalEventMutations:this.externalMutations,padding:150,style:{data:{fill:function(t,a){var n=e["selection color"].selected||e["selection color"].default,r=e.color.selected||e.color.default,o=e["group by"],i=void 0!==e["use default color"].selected?e["use default color"].selected:e["use default color"].default;if(a)return n;if(o&&!i){var c=o.selected||o.default,l=t[o.values[c]];if(l){var s=e["group color"].values.indexOf(l);return s>=0?e["group color"].selected[s]:e["group color"].default}return r}return r},strokeDasharray:"5,5"}},size:parseInt(e.size.selected||e.size.default,10),x:e.domain.values[t],y:e.range.values[a],data:this.state.data.map(function(n){var r=Object.assign({},n),o=e.domain.values[t],i=e.domain.values[a];return r[o]=Number(n[o]),r[i]=Number(n[i]),r})}),r.a.createElement(w.a,{tickCount:5,label:e.domain.values[t],gridComponent:r.a.createElement(A.a,{style:{display:"none"}}),axisLabelComponent:r.a.createElement(x.a,{dy:15,style:this.labelStyle})}),r.a.createElement(w.a,{dependentAxis:!0,label:e.range.values[a],axisLabelComponent:r.a.createElement(x.a,{dy:-10,angle:"90",style:this.labelStyle}),gridComponent:r.a.createElement(A.a,{style:{display:"none"}})}))}return r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))}}]),t}(r.a.Component);N.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid],n=[{childName:"ScatterPlot",target:["data"],eventKey:"all",mutation:function(e,t,a,n){return e.active=!1,console.log("mutation"),{active:!1}},callback:t.finishMutation}];if(!e.data||e.data===t.data){if(e.data&&a&&a["group by"]&&a["group by"].selected!==t.groupBy){var r=new Set(e.data.map(function(e){return e[a["group by"].values[a["group by"].selected||a["group by"].default]]}));r.delete(void 0),r||(a["use default color"].hidden=!0);var o=a["group color"].default.slice();return e.updateAttrValues(e.blockid,"group color",Array.from(r)),e.updateAttrSelection(e.blockid,"group color",o),Object(s.a)({},t,{data:e.data,groupBy:a["group by"].selected,externalMutations:n,range:a.range.selected||a.range.default,domain:a.domain.selected||a.domain.default})}return e.data&&a&&a.domain&&a.range&&(a.domain.selected&&a.domain.selected!==t.domain||a.range.selected&&a.range.selected!==t.range)?Object(s.a)({},t,{externalMutations:n,range:a.range.selected||a.range.default,domain:a.domain.selected||a.domain.default}):Object(s.a)({},t,{externalMutations:void 0})}var i=function(){var r=[],o=[],i=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){isNaN(e[t])?!i.includes(t)&&e[t]&&i.push(t):(!r.includes(t)&&e[t]&&r.push(t),!o.includes(t)&&e[t]&&o.push(t))})});for(var c=function(t){var a;a=e.data.map(function(e){return e[i[t]]}),new Set(a).size>10&&(i.splice(t,1),t--),l=t},l=0;l<i.length;l++)c(l);return e.updateAttrValues(e.blockid,"domain",r),e.updateAttrValues(e.blockid,"range",o),e.updateAttrValues(e.blockid,"group by",i),{v:Object(s.a)({},t,{data:e.data,externalMutations:n,range:a.range.default,domain:a.domain.default})}}();if("object"===typeof i)return i.v};var D=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))},updateAttrSelection:function(t,a,n){return e(k(t,a,n))}}})(N),B=a(902),M=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Line Chart"},domain:{type:"selection",values:[],default:0},range:{type:"selection",values:[],default:1},color:{type:"color",default:"rgb(100, 0, 40)"}})},a.getDomainRange=function(){var e=a.props.options[a.props.blockid],t=e.domain.selected||e.domain.default,n=e.domain.values[t],r=Math.min.apply(Math,a.state.data.map(function(e){return Number(e[n])}).filter(function(e){return!isNaN(e)})),o=Math.max.apply(Math,a.state.data.map(function(e){return Number(e[n])}).filter(function(e){return!isNaN(e)})),i=e.range.selected||e.range.default,c=e.range.values[i];return{x:[r,o],y:[Math.min.apply(Math,a.state.data.map(function(e){return Number(e[c])}).filter(function(e){return!isNaN(e)})),Math.max.apply(Math,a.state.data.map(function(e){return Number(e[c])}).filter(function(e){return!isNaN(e)}))]}},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.options[this.props.blockid];if(this.props.data){var t=e.domain.selected||e.domain.default,a=e.range.selected||e.range.default;return r.a.createElement(E.a,{theme:j.a.material,domain:this.getDomainRange(),width:this.props.width,height:this.props.height,containerComponent:r.a.createElement(S.a,null),domainPadding:5},r.a.createElement(B.a,{style:{data:{stroke:function(t,a){return a?"rgb(139,195,74)":e.color.selected||e.color.default}}},x:e.domain.values[t],y:e.range.values[a],data:this.state.data.map(function(n){var r=Object.assign({},n),o=e.domain.values[t],i=e.domain.values[a];return r[o]=Number(n[o]),r[i]=Number(n[i]),r})}),r.a.createElement(w.a,{label:e.domain.values[t],gridComponent:r.a.createElement(A.a,{style:{display:"none"}}),axisLabelComponent:r.a.createElement(x.a,{dy:15,style:this.labelStyle})}),r.a.createElement(w.a,{dependentAxis:!0,label:e.range.values[a],axisLabelComponent:r.a.createElement(x.a,{dy:-10,angle:"90",style:this.labelStyle}),gridComponent:r.a.createElement(A.a,{style:{display:"none"}})}))}return r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))}}]),t}(r.a.Component);M.getDerivedStateFromProps=function(e,t){if(e.data&&e.data!==t.data){var a=[],n=[];return Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){isNaN(e[t])||(!a.includes(t)&&e[t]&&a.push(t),!n.includes(t)&&e[t]&&n.push(t))})}),e.updateAttrValues(e.blockid,"domain",a),e.updateAttrValues(e.blockid,"range",n),Object(s.a)({},t,{data:e.data})}return Object(s.a)({},t)};var I=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))}}})(M),P=a(903),z=function(e,t){for(var a,n=[],r=t.dimension.selected||t.dimension.default,o=t.dimension.values[r],i=t.bins.selected||t.bins.default,c=Math.min.apply(Math,e.map(function(e){return Number(e[o])}).filter(function(e){return!isNaN(e)})),s=Math.max.apply(Math,e.map(function(e){return Number(e[o])}).filter(function(e){return!isNaN(e)})),d=(s-c)/i,u=function(t){var r;n.push((r={},Object(l.a)(r,o,t),Object(l.a)(r,"frequency",e.filter(function(e){return e[o]>=t&&e[o]<t+d}).length),Object(l.a)(r,"interval",d),r)),a=t},p=c;p<s;p+=d)u(p);return a+d===s&&(n.find(function(e){return e[o]===a}).frequency+=e.filter(function(e){return e[o]===s}).length),n},T=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],binData:[]},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Histogram"},dimension:{type:"selection",values:[],default:0},bins:{type:"number",default:5},color:{type:"color",default:"rgb(100, 0, 40)"},"selection color":{type:"color",default:"rgba(100, 200, 0, 0.7)"}})},a.getDomain=function(){var e=a.props.options[a.props.blockid],t=e.dimension.selected||e.dimension.default,n=e.dimension.values[t],r=e.bins.selected||e.bins.default,o=Math.min.apply(Math,a.state.binData.map(function(e){return e[n]})),i=Math.max.apply(Math,a.state.binData.map(function(e){return e[n]}));return{x:[o,i+(i-o)/r],y:[0,Math.max.apply(Math,a.state.binData.map(function(e){return e.frequency}))]}},a.updateOutput=function(e,t,n){var r=e[0].data.map(function(e){return Number(e._x)}),o=e[0].data[0].interval,i=Math.min.apply(Math,r),c=Math.max.apply(Math,r)+o,l=a.props.options[a.props.blockid];if(a.props.onSelection&&a.props.data){var s=l.dimension.selected||l.dimension.default,d=l.dimension.values[s];a.props.onSelection(a.props.blockid,{type:"selection",data:a.props.data.filter(function(e){return e[d]>=i&&e[d]<c})})}},a.resetOutput=function(){a.props.onSelection&&a.props.onSelection(a.props.blockid,{type:"selection",data:[]})},a.renderContent=function(){var e=a.props,t=e.width,n=e.height,o=a.props.options[a.props.blockid];if(a.props.data){var i=o.dimension.selected||o.dimension.default;return r.a.createElement(E.a,{theme:j.a.material,domain:a.getDomain(),width:t,height:n,containerComponent:r.a.createElement(S.a,{selectionDimension:"x",onSelection:a.updateOutput,onSelectionCleared:a.resetOutput}),domainPadding:5},r.a.createElement(x.a,{text:o.dimension.values[i],dy:50,dx:t-100,style:{fontSize:12,fill:"rgb(69, 90, 100)",fontWeight:"bold"}}),r.a.createElement(P.a,{barRatio:1.1,alignment:"start",x:o.dimension.values[i],y:"frequency",data:a.state.binData,style:{data:{fill:function(e,t){var a=o["selection color"].selected||o["selection color"].default,n=o.color.selected||o.color.default;return t?a:n}}}}),r.a.createElement(w.a,{gridComponent:r.a.createElement(A.a,{style:{display:"none"}})}),r.a.createElement(w.a,{dependentAxis:!0,axisLabelComponent:r.a.createElement(x.a,{dy:20}),gridComponent:r.a.createElement(A.a,{style:{display:"none"}})}))}return r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component);T.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid];if(e.data){if(e.data!==t.data){var n=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){n.includes(t)||isNaN(e[t])||!e[t]||n.push(t)})}),e.updateAttrValues(e.blockid,"dimension",n);var r=z(e.data,a);return Object(s.a)({},t,{binData:r,data:e.data})}if(a&&(a.bins.selected||a.dimension.selected)){var o=z(e.data,a);return Object(s.a)({},t,{binData:o,data:e.data})}return Object(s.a)({},t)}return Object(s.a)({},t)};var F=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))}}})(T),L=a(388),_=a.n(L),V=a(912),R=a(898),H=a(899),W=a(911),U=a(29),K=a.n(U),G="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",J="&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",q={lat:0,lng:0},Z=function(e,t){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 40"},r.a.createElement("path",{fill:t,d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",transform:"translate(0, -2)"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v20H0z"}))},Q=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],zoom:2},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Map"},popup:{type:"selection",values:[],default:0},"pin size":{type:"number",default:25},"use default color":{type:"toggle",default:!0,hidden:!1},"default pin color":{type:"color",default:"#0E1C3F"},"group by":{type:"selection",values:[],default:0},"group color":{type:"colorArray",default:["#ff0029AA","#377eb8AA","#66a61eAA","#984ea3AA","#00d2d5AA","#ff7f00AA","#af8d00AA","#7f80cdAA","#b3e900AA","#c42e60AA"],values:[]}})},a.componentDidUpdate=function(){a.refs.map&&a.refs.map.leafletElement.invalidateSize()},a.findProp=function(e,t){for(var a in e)if(a.toLowerCase()===t.toLowerCase())return Number(e[a].replace(/"/g,""))},a.searchForLatLng=function(e){var t,n=a.findProp(e,"lat")||a.findProp(e,"latitude"),r=a.findProp(e,"lng")||a.findProp(e,"longitude");return n&&r?{lat:n,lng:r}:(Object.values(e).forEach(function(e){null===e||"object"!==typeof e||t||(t=a.searchForLatLng(e))}),t||void 0)},a.renderPopup=function(e){var t=a.props.options[a.props.blockid];if(t){var n=t.popup.selected||t.popup.default,o=t.popup.values[n],i=e[o],c=t["pin size"].selected||t["pin size"].default;return r.a.createElement(V.a,{offset:new K.a.Point(0,0-c/2)},r.a.createElement("span",null,r.a.createElement("strong",null,o),": ",i?JSON.stringify(i):"--"))}},a.renderMarker=function(e,t){var n,o=a.props.options[a.props.blockid];if(void 0!==o["use default color"].selected?o["use default color"].selected:o["use default color"].default)n=o["default pin color"].selected||o["default pin color"].default;else{var i=o["group by"].values[o["group by"].selected||o["group by"].default];if(e[i]){var c=o["group color"].values.indexOf(e[i]);n=o["group color"].selected&&o["group color"].selected[c]||o["group color"].default[c]}else n=o["default pin color"].selected||o["default pin color"].default}var l=o["pin size"].selected||o["pin size"].default,s=K.a.divIcon({html:_.a.renderToStaticMarkup(Z(l,n)),iconSize:new K.a.Point(l,l)}),d=a.searchForLatLng(e);if(d)return r.a.createElement(R.a,{position:d,key:"".concat(t,"-").concat(l),icon:s},a.renderPopup(e))},a.renderContent=function(){var e=a.props,t=e.width,n=e.height;if(a.props.data){var o=a.state.data.map(function(e,t){return a.renderMarker(e,t)}).filter(function(e){return void 0!==e}),i=a.state.data.map(function(e){return a.searchForLatLng(e)}).filter(function(e){return void 0!==e});return r.a.createElement(H.a,{ref:"map",center:q,zoom:a.state.zoom,minZoom:1,bounds:i.length?i:void 0,zoomControl:!0,height:n,width:t},r.a.createElement(W.a,{url:G,attribution:J}),o)}return r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component);Q.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid];if(!e.data||e.data===t.data){if(e.data&&a&&a["group by"]&&a["group by"].selected!==t.groupBy){var n=new Set(e.data.map(function(e){return e[a["group by"].values[a["group by"].selected||a["group by"].default]]}));n.delete(void 0),n||(a["use default color"].hidden=!0);var r=a["group color"].default.slice();return e.updateAttrValues(e.blockid,"group color",Array.from(n)),e.updateAttrSelection(e.blockid,"group color",r),Object(s.a)({},t,{data:e.data,groupBy:a["group by"].selected})}return Object(s.a)({},t)}var o=function(){var n=[],r=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){isNaN(e[t])&&!r.includes(t)&&e[t]&&r.push(t),n.includes(t)||n.push(t)})});for(var o=function(t){var a;a=e.data.map(function(e){return e[r[t]]}),new Set(a).size>10&&(r.splice(t,1),t--),i=t},i=0;i<r.length;i++)o(i);var c=new Set(e.data.map(function(e){return e[r[a["group by"].default]]}));c.delete(void 0),c||(a["use default color"].hidden=!0);var l=a["group color"].default.slice();return e.updateAttrValues(e.blockid,"group by",r),e.updateAttrValues(e.blockid,"popup",n),e.updateAttrValues(e.blockid,"group color",Array.from(c)),e.updateAttrSelection(e.blockid,"group color",l),{v:Object(s.a)({},t,{data:e.data})}}();if("object"===typeof o)return o.v};var X=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))},updateAttrSelection:function(t,a,n){return e(k(t,a,n))}}})(Q),Y=a(52),$=a.n(Y),ee=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={data:[]},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Data"}})},a.renderContent=function(){var e=a.props.options[a.props.blockid],t=e&&e.name?void 0!==e.name.selected?e.name.selected:e.name.default:"Data";return r.a.createElement("div",{className:"content-text"},r.a.createElement($.a,{variant:"body2"},t))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component),te=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))}}})(ee),ae=a(391),ne=a.n(ae),re=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={tableData:[],data:[],headers:[],updated:!1},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Table"},"hidden columns":{type:"multiple",values:[],default:[]}})},a.componentDidUpdate=function(){a.state.updated&&a.setState({updated:!1})},a.handleHotBeforeOnCellMouseDown=function(e,t,a){t.row<0&&e.stopImmediatePropagation()},a.handleSelection=function(e,t,n,r){a.props.onSelection(a.props.id,{type:"selection",data:a.props.data.slice(e,n+1)})},a.clearSelection=function(){a.props.onSelection(a.props.id,{type:"selection",data:[]})},a.renderContent=function(){if(a.props.data){var e=a.state.tableData.map(function(e){var t=Object.assign({},e);return Object.keys(t).forEach(function(e){null!==t[e]&&"object"===typeof t[e]&&(t[e]=JSON.stringify(t[e]))}),t});return r.a.createElement(ne.a,{ref:"table",root:"table-".concat(a.props.blockid),settings:{data:e,colHeaders:a.state.headers,rowHeaders:!0,stretchH:"all",afterSelectionEnd:a.handleSelection,afterDeselect:a.clearSelection,beforeOnCellMouseDown:a.handleHotBeforeOnCellMouseDown,readOnly:!0,outsideClickDeselects:!1}})}return r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component);re.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid],n=e.data?function(e){var t=[];return Object.values(e).forEach(function(e){Object.keys(e).forEach(function(e){t.includes(e)||t.push(e)})}),t}(e.data):[];if(e.data&&e.data!==t.data)return e.updateAttrValues(e.blockid,"hidden columns",n.slice(0)),Object(s.a)({},t,{data:e.data,tableData:e.data,headers:n});if(a&&a["hidden columns"].selected&&(a["hidden columns"].selected.some(function(e){return t.headers.indexOf(e)>=0})||n.some(function(e){return t.headers.concat(a["hidden columns"].selected).indexOf(e)<0}))){var r=Object.values(e.data).map(function(e){var t=Object.assign({},e);return a["hidden columns"].selected.forEach(function(e){delete t[e];var a=n.indexOf(e);a>=0&&n.splice(a,1)}),t});return Object(s.a)({},t,{data:e.data,tableData:r,headers:n,updated:!0})}return Object(s.a)({},t)};var oe=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))}}})(re),ie=a(909),ce=function(e,t){var a=[],n={others:0};return e.forEach(function(e){var a=e[t];a?void 0!==n[a]?n[a]++:n[a]=1:n.others++}),0===n.others&&delete n.others,Object.keys(n).forEach(function(e){a.push({x:e,y:n[e],label:"".concat(e," [").concat(n[e],"]")})}),a},le=function(e){return new Set(e).size},se=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],sliceData:[],dimension:void 0,selectedData:[]},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Pie Chart"},dimension:{type:"selection",values:[],default:0},"group color":{type:"colorArray",default:["#ff0029","#377eb8","#66a61e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60"],values:[]}})},a.getCurrentDimension=function(){var e=a.props.options[a.props.blockid],t=e.dimension.selected||e.dimension.selected.default;return e.dimension.values[t]},a.addSelected=function(e){var t=a.getCurrentDimension(),n=a.props.data.filter(function(a){return a[t]===e}),r=a.state.selected.concat[n];a.setState({selected:r})},a.removeSelected=function(e){var t=a.getCurrentDimension(),n=a.state.selected.filter(function(a){return a[t]!==e});a.setState({selected:n})},a.renderContent=function(){var e=a.props.options[a.props.blockid];return a.props.data?r.a.createElement(ie.a,{colorScale:e["group color"].selected||e["group color"].default,data:a.state.sliceData}):r.a.createElement("div",{className:"content-text"},r.a.createElement("span",null,"No Data"))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component);se.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid];if(!e.data)return Object(s.a)({},t);if(e.data!==t.data){var n=function(){var n=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){!n.includes(t)&&isNaN(e[t])&&e[t]&&n.push(t)})});for(var r=function(t){le(e.data.map(function(e){return e[n[t]]}))>10&&(n.splice(t,1),t--),o=t},o=0;o<n.length;o++)r(o);var i=ce(e.data,n[a.dimension.default]),c=Object.values(i).map(function(e){return e.x});return e.updateAttrValues(e.blockid,"dimension",n),e.updateAttrValues(e.blockid,"group color",Array.from(c)),e.updateAttrSelection(e.blockid,"group color",a["group color"].default),{v:Object(s.a)({},t,{sliceData:i,data:e.data,dimension:a.dimension.default})}}();if("object"===typeof n)return n.v}else{if(!a||!a.dimension.selected||a.dimension.selected===t.dimension)return Object(s.a)({},t);var r=function(){var n=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){!n.includes(t)&&isNaN(e[t])&&e[t]&&n.push(t)})});for(var r=function(t){le(e.data.map(function(e){return e[n[t]]}))>10&&(n.splice(t,1),t--),o=t},o=0;o<n.length;o++)r(o);var i=ce(e.data,n[a.dimension.selected]),c=Object.values(i).map(function(e){return e.x});return e.updateAttrValues(e.blockid,"group color",Array.from(c)),{v:Object(s.a)({},t,{sliceData:i,data:e.data,dimension:a.dimension.selected})}}();if("object"===typeof r)return r.v}};var de=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))},updateAttrSelection:function(t,a,n){return e(k(t,a,n))}}})(se),ue=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],filterBy:void 0,selectedFilters:void 0},a.componentDidMount=function(){a.props.initOptions(a.props.blockid,{name:{type:"string",default:"Filter"},"filter by":{type:"selection",values:[],default:0},filters:{type:"multiple",values:[],default:[]}})},a.renderContent=function(){var e=a.props.options[a.props.blockid],t=e&&e.name?void 0!==e.name.selected?e.name.selected:e.name.default:"Filter";return r.a.createElement("div",{className:"content-text"},r.a.createElement($.a,{variant:"body2"},t))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.renderContent()}}]),t}(r.a.Component);ue.getDerivedStateFromProps=function(e,t){var a=e.options[e.blockid];if(e.data&&e.data!==t.data){var n=[];Object.values(e.data).forEach(function(e){Object.keys(e).forEach(function(t){isNaN(e[t])&&!n.includes(t)&&e[t]&&n.push(t)})});var r=[],o=n[a["filter by"].default];Object.values(e.data).forEach(function(e){r.includes(e[o])||r.push(e[o])});var i=r.slice();return e.updateAttrValues(e.blockid,"filter by",n),e.updateAttrValues(e.blockid,"filters",r),e.updateAttrSelection(e.blockid,"filters",i),Object(s.a)({},t,{data:e.data,filterBy:a["filter by"].default,selectedFilters:i.slice()})}if(e.data&&a&&a["filter by"].selected&&a["filter by"].selected!==t.filterBy){var c=[],l=a["filter by"].values[a["filter by"].selected||a["filter by"].default];Object.values(e.data).forEach(function(e){e[l]&&!c.includes(e[l])&&c.push(e[l])});var d=c.slice();return e.updateAttrValues(e.blockid,"filters",c),e.updateAttrSelection(e.blockid,"filters",d),e.onSelection(e.blockid,{type:"selection",data:e.data}),Object(s.a)({},t,{data:e.data,filterBy:a["filter by"].selected,selectedFilters:d.slice()})}if(e.data&&a&&a.filters.selected&&(a.filters.selected.some(function(e){return!t.selectedFilters.includes(e)})||t.selectedFilters.some(function(e){return!a.filters.selected.includes(e)}))){var u=a["filter by"].values[a["filter by"].selected||a["filter by"].default],p=a.filters.selected||a.filters.default,f=e.data.filter(function(e){return p.includes(e[u])});return e.onSelection(e.blockid,{type:"selection",data:f}),Object(s.a)({},t,{selectedFilters:p.slice()})}return Object(s.a)({},t)};var pe=Object(i.b)(function(e){return{options:e.controlState.options}},function(e){return{initOptions:function(t,a){return e(g(t,a))},updateAttrValues:function(t,a,n){return e(O(t,a,n))},updateAttrSelection:function(t,a,n){return e(k(t,a,n))}}})(ue),fe=a(79),me=a.n(fe),he=a(42),be=a(396),ye=a.n(be),ve=a(395),ge=a.n(ve),Oe=a(394),ke=a.n(Oe),Ee=a(407),je=a(393),Se=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={position:{top:a.props.top,left:a.props.left},size:{width:a.props.width,height:a.props.height},prevSize:{width:a.props.width,height:a.props.height}},a.componentDidMount=function(){document.addEventListener("mousedown",a.handleClick,!1)},a.handleClick=function(e){a.node&&a.node.contains(e.target)&&!a.props.isConnecting&&a.props.selectBlock(a.props.id),a.node&&!a.node.contains(e.target)&&a.props.controlRef&&!a.props.controlRef.contains(e.target)&&a.handleClickOutside()},a.handleClickOutside=function(){a.props.selectedId===a.props.id&&a.props.selectBlock(-1)},a.updateSize=function(e,t,n,r,o){a.props.moveBlock(a.props.id,{size:{width:a.state.prevSize.width+r.width,height:a.state.prevSize.height+r.height},position:o}),a.setState({size:{width:a.state.prevSize.width+r.width,height:a.state.prevSize.height+r.height},position:{top:o.y,left:o.x}})},a.updatePrevSize=function(e,t,n,r,o){a.setState({prevSize:{width:a.state.size.width,height:a.state.size.height}})},a.updatePosition=function(e,t){a.props.moveBlock(a.props.id,{size:a.state.size,position:{x:t.x,y:t.y}}),a.setState({position:{top:t.y,left:t.x}})},a.renderChildrenWithProps=function(){return r.a.Children.map(a.props.children,function(e){return r.a.cloneElement(e,{data:e.props.data,blockid:a.props.id,width:a.state.size.width,height:a.state.size.height})})},a.handleBlockClick=function(e){a.props.isConnecting||a.props.selectBlock(a.props.id),a.props.isConnecting&&a.props.id!==a.props.connectionSource&&(a.props.onUpdate(a.props.id,a.props.connectionSource),a.props.finishConnect())},a.handleConnectClick=function(){a.props.startConnect(a.props.id)},a.handleContextMenu=function(e){e.preventDefault()},a.handleClose=function(){a.props.deleteBlock(a.props.id)},a.getClassNames=function(){return"container-block ".concat(a.props.selectedId===a.props.id?"container-selected":"")},a.csvLink=function(e,t){return function(a){return r.a.createElement(je.CSVLink,Object.assign({filename:t+"_data.csv",data:e},a))}},a.renderDownloadButton=function(e,t){var n=a.props.options[a.props.id];if(t&&n)return r.a.createElement(me.a,{className:e.button,"aria-label":"Download",component:a.csvLink(t,n.name.selected||n.name.default)},r.a.createElement(ke.a,{style:{fontSize:15}}))},a.renderHandle=function(){var e=a.props.classes,t=a.props.options[a.props.id],n=t&&t.name?void 0!==t.name.selected?t.name.selected:t.name.default:"Block ".concat(a.props.id);return r.a.createElement("div",{className:"handle"},r.a.createElement(me.a,{className:e.button,"aria-label":"Close",onClick:a.handleClose},r.a.createElement(ge.a,{style:{fontSize:15}})),r.a.createElement(me.a,{className:e.button,"aria-label":"Arrow",onClick:a.handleConnectClick},r.a.createElement(ye.a,{style:{fontSize:15}})),a.renderDownloadButton(e,a.props.children.props.data),r.a.createElement("div",{className:"blockTitle"},r.a.createElement($.a,{variant:"subheading",noWrap:!0,color:"inherit"},a.props.headerVisible?n:"")))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"renderNoData",value:function(){return r.a.createElement("span",null,"Empty")}},{key:"render",value:function(){var e=this,t=this.state,a=t.position,n=t.size,o=this.props,i=o.minWidth,c=o.minHeight;return r.a.createElement(Ee.a,{default:{x:a.left,y:a.top,width:n.width>i?n.width:i,height:n.height>c?n.height:c},dragHandleClassName:".handle",onResize:this.updateSize,onResizeStop:this.updatePrevSize,onDrag:this.updatePosition,bounds:"parent",minWidth:i,minHeight:c,style:{zIndex:"1"},className:this.getClassNames()},r.a.createElement("div",{className:this.getClassNames(),onClick:this.handleBlockClick,onContextMenu:this.handleContextMenu,ref:function(t){return e.node=t}},this.renderHandle(),r.a.createElement("div",{className:"block-content"},this.props.children?this.renderChildrenWithProps():this.renderNoData())))}}]),t}(r.a.Component);Se.defaultProps={minWidth:150,minHeight:150,headerVisible:!0};var Ce=Object(i.b)(function(e){return{isConnecting:e.controlState.connecting,connectionSource:e.controlState.sourceId,selectedId:e.controlState.selected,options:e.controlState.options}},function(e){return{moveBlock:function(t,a){return e(function(e,t){return{type:"MOVE_BLOCK",payload:{id:e,props:t}}}(t,a))},deleteBlock:function(t){return e(v(t))},startConnect:function(t){return e({type:"ENABLE_CONNECT",payload:{id:t}})},finishConnect:function(){return e({type:"FINISH_CONNECT"})},selectBlock:function(t){return e(function(e){return{type:"SELECT_BLOCK",payload:{id:e}}}(t))}}})(Object(he.withStyles)(function(e){return{button:{margin:e.spacing.unit/2},input:{display:"none"}}})(Se)),we=30,Ae=1,xe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={xi:a.props.xi,yi:a.props.yi,dx:a.props.xe-a.props.xi,dy:a.props.ye-a.props.yi,hover:!1},a.renderArrowHead=function(e,t){return r.a.createElement("path",{className:"arrowHead",d:"\n        M ".concat(e," ").concat(t,"\n        l -15 -5\n        l 0 10\n        Z\n      "),fill:"rgb(100,100,100)"})},a.renderForwardPath=function(e,t,a,n){return r.a.createElement("path",{className:"edge",d:"\n        M ".concat(e," ").concat(t," \n        c ").concat(a/2," 00 ").concat(a/2," 00 ").concat(a/2," ").concat(n/2," \n        c 00 ").concat(n/2," 00 ").concat(n/2," ").concat(a/2-5," ").concat(n/2,"\n      "),strokeWidth:Ae,fill:"none"})},a.renderBackwardsPath=function(e,t,a,n){return r.a.createElement("path",{className:"edge",d:"\n        M ".concat(e," ").concat(t," \n        c ").concat(we," 00 ").concat(we," 00 ").concat(we," ").concat(n/3,"\n        c 0 ").concat(n/6," 0 ").concat(n/6," ").concat(a/2-we," ").concat(n/6,"\n        c ").concat(a/2-we," 0 ").concat(a/2-we," 0 ").concat(a/2-we," ").concat(n/6,"\n        c 0 ").concat(n/3," 0 ").concat(n/3," ").concat(we-5," ").concat(n/3,"\n      "),strokeWidth:Ae,fill:"none"})},a.renderPath=function(e,t,n,r){return n<2*we?a.renderBackwardsPath(e,t,n,r):a.renderForwardPath(e,t,n,r)},a.hoverOn=function(){a.setState(Object(s.a)({},a.state,{hover:!0}))},a.hoverOff=function(){a.setState(Object(s.a)({},a.state,{hover:!1}))},a.getClassName=function(){return(a.props.className||"")+(a.state.hover?"hover":"")},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.xi,a=e.yi,n=e.dx,o=e.dy;return r.a.createElement("g",{className:this.getClassName(),onMouseOver:this.hoverOn,onMouseLeave:this.hoverOff,stroke:"rgb(120,120,120)"},this.renderPath(t,a,n,o),this.renderArrowHead(t+n,a+o))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(s.a)({},t,{xi:e.xi,yi:e.yi,dx:e.xe-e.xi,dy:e.ye-e.yi})}}]),t}(r.a.Component);xe.defaultProps={xi:0,yi:0,xe:0,ye:0};var Ne=xe,De=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("svg",{style:{width:"100%",height:"100%",zIndex:"2"}},Object.keys(this.props.arrows).filter(function(t){return e.props.arrows.hasOwnProperty(t)}).map(function(t){return r.a.createElement(Ne,{key:t,xi:e.props.arrows[t].xi,yi:e.props.arrows[t].yi,xe:e.props.arrows[t].xe-1,ye:e.props.arrows[t].ye})}))}}]),t}(r.a.Component),Be=Object(i.b)(function(e){return{arrows:e.arrowsState.arrows}})(De),Me=a(110),Ie=a.n(Me),Pe=a(67),ze=a.n(Pe),Te=a(154),Fe=a.n(Te),Le=a(55),_e=a.n(Le),Ve=a(68),Re=a.n(Ve),He=a(156),We=a.n(He),Ue=a(191),Ke=a.n(Ue),Ge=a(397),Je=a.n(Ge),qe=a(398),Ze=a.n(qe),Qe=a(399),Xe=a.n(Qe),Ye=a(400),$e=a.n(Ye),et=a(401),tt=a.n(et),at=a(402),nt=a.n(at),rt=a(403),ot=a.n(rt),it=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(Ie.a,{variant:"permanent",classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(Fe.a,null,r.a.createElement(ze.a,{title:"Add data",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("Data")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:tt.a,width:45,alt:"Data"})))),r.a.createElement(We.a,null),r.a.createElement(ze.a,{title:"Table",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("Table")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:nt.a,width:45,alt:"Table"})))),r.a.createElement(ze.a,{title:"Pie Chart",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("PieChart")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:ot.a,width:45,alt:"PieChart"})))),r.a.createElement(ze.a,{title:"Line Chart",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("LineChart")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:Xe.a,width:45,alt:"LineChart"})))),r.a.createElement(ze.a,{title:"Histogram",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("Histogram")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:Je.a,width:45,alt:"Histogram"})))),r.a.createElement(ze.a,{title:"Scatter Plot",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("ScatterPlot")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:Ze.a,width:45,alt:"ScatterPlot"})))),r.a.createElement(ze.a,{title:"Pin Map",placement:"right",classes:{popper:t.popper}},r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("Map")}},r.a.createElement(Re.a,{classes:{root:t.listIcons}},r.a.createElement("img",{src:$e.a,width:45,alt:"Map"})))),r.a.createElement(We.a,null),r.a.createElement(_e.a,{button:!0,disableGutters:!0,onClick:function(){return e.props.onCreateBlock("Filter")}},r.a.createElement(_e.a,{button:!0,classes:{root:t.listItemRoot}},r.a.createElement(Ke.a,{classes:{primary:t.listItemText},primary:"Filter"})))))}}]),t}(r.a.Component),ct=Object(he.withStyles)(function(e){return{drawerPaper:{position:"relative",width:50},toolbar:e.mixins.toolbar,popper:{left:"30px !important",top:"10px !important"},listIcons:{margin:"0"},listItemRoot:{paddingLeft:"7px"},listItemText:{fontSize:"15px",color:"#668"}}})(it),lt=a(406),st=a(11),dt=a.n(st),ut=a(404),pt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={displayColorPicker:!1},a.handleClick=function(){a.setState({displayColorPicker:!a.state.displayColorPicker})},a.handleClose=function(){a.setState({displayColorPicker:!1})},a.handleChange=function(e){var t=e.rgb;a.props.onSelect("rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")"))},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=dt()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:this.props.color},swatch:{width:"fit-content",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:e.swatch,onClick:this.handleClick},r.a.createElement("div",{style:e.color})),this.state.displayColorPicker?r.a.createElement("div",{style:e.popover},r.a.createElement("div",{style:e.cover,onClick:this.handleClose}),r.a.createElement(ut.SketchPicker,{color:this.props.color,onChange:this.handleChange})):null)}}]),t}(r.a.Component),ft=a(129),mt=a.n(ft),ht=a(44),bt=function(e){return e&&e[0].toUpperCase()+e.slice(1)},yt=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).handleToggleChange=function(e){return function(t){a.props.onFieldChange(e,t.target.checked)}},a.handleFieldChange=function(e){return function(t){a.props.onFieldChange(e,t.target.value)}},a.handleColorChange=function(e){return function(t){a.props.onFieldChange(e,t)}},a.handleColorArrayChange=function(e,t,n){return function(r){var o=e?e.slice():[];o[t]=r,a.props.onFieldChange(n,o)}},a.handleSelectChange=function(e,t){return function(n){var r=n.target.value;if(t.includes(r)){var o=t;Object.keys(t).forEach(function(e){t[e]===r&&o.splice(e,1)}),a.props.onFieldChange(e,o)}else a.props.onFieldChange(e,[].concat(Object(lt.a)(t),[r]))}},a.renderControls=function(){var e=a.props.options;if(e)return e.attributes.map(function(t){switch(e[t].type){case"string":return r.a.createElement(mt.a,{key:t,label:bt(t),value:void 0!==e[t].selected?e[t].selected:e[t].default,onChange:a.handleFieldChange(t),margin:"normal"});case"selection":if(e[t].values.length)return r.a.createElement(mt.a,{key:t,select:!0,fullWidth:!0,label:bt(t),value:e[t].selected||e[t].default,onChange:a.handleFieldChange(t),SelectProps:{native:!0},margin:"normal",InputLabelProps:{shrink:!0}},e[t].values.map(function(e,t){return r.a.createElement("option",{key:e,value:t},e)}));break;case"color":return r.a.createElement(ht.b,{key:t,fullWidth:!0,margin:"normal"},r.a.createElement(ht.e,{component:"legend",style:{transform:"scale(0.75)",transformOrigin:"top left"}},bt(t)),r.a.createElement(pt,{color:e[t].selected||e[t].default,onSelect:a.handleColorChange(t)}));case"number":return r.a.createElement(mt.a,{key:t,fullWidth:!0,label:bt(t),value:e[t].selected||e[t].default,onChange:a.handleFieldChange(t),type:"number",InputLabelProps:{shrink:!0},margin:"normal"});case"multiple":return r.a.createElement(ht.b,{key:t,component:"fieldset",margin:"normal"},r.a.createElement(ht.e,{component:"legend",style:{transform:"scale(0.75)",transformOrigin:"top left"}},bt(t)),r.a.createElement(ht.d,null,e[t].values.map(function(n){return r.a.createElement(ht.c,{key:n,control:r.a.createElement(ht.a,{checked:(e[t].selected||e[t].default).includes(n),onChange:a.handleSelectChange(t,e[t].selected||e[t].default),value:n}),label:n})})));case"colorArray":if(e[t].values.length)return r.a.createElement(ht.b,{component:"fieldset",margin:"normal"},r.a.createElement(ht.e,{component:"legend",style:{transform:"scale(0.75)",transformOrigin:"top left"}},bt(t)),r.a.createElement(ht.d,null,e[t].values.map(function(n,o){return r.a.createElement(ht.b,{key:n,fullWidth:!0,style:{marginTop:"3px"}},r.a.createElement(ht.e,{component:"legend",style:{transform:"scale(0.75)",transformOrigin:"top left"}},n),r.a.createElement(pt,{color:e[t].selected&&e[t].selected[o]||e[t].default[o],onSelect:a.handleColorArrayChange(e[t].selected,o,t)}))})));break;case"toggle":if(!e[t].hidden)return r.a.createElement(ht.b,{margin:"normal",fullWidth:!0},r.a.createElement(ht.e,{component:"legend",style:{transform:"scale(0.75)",transformOrigin:"top left"}},bt(t)),r.a.createElement(ht.f,{checked:void 0!==e[t].selected?e[t].selected:e[t].default,onChange:a.handleToggleChange(t),value:t}));break;default:return null}})},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Ie.a,{open:this.props.open,anchor:"right",variant:"persistent",classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.toolbar}),r.a.createElement("div",{style:{height:"100%"}},this.renderControls()))}}]),t}(r.a.Component),vt=Object(he.withStyles)(function(e){return{drawerPaper:{width:250,padding:"10px"},toolbar:e.mixins.toolbar}})(yt),gt=a(405),Ot=a.n(gt),kt=a(192),Et=a.n(kt),jt=a(193),St=a.n(jt),Ct=function e(t,a){var n=a[t];if(n){var r;switch(n.type){case"data":r=n.data;break;case"input":r=e(n.data,a);break;default:r=[]}return r&&r.length&&n.selection&&n.selection.length>0&&(r=n.selection),r}},wt=function(e){return Ot.a.parse(e,{header:!0,trimHeaders:!0}).data},At=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={controlDrawerOpen:!1},a.componentDidMount=function(){},a.handleKeyPress=function(e){},a.createBlock=function(e){switch(e){case"Data":a.openFileDialog(a.handleDataFiles);break;default:a.addBlock(e)}},a.openFileDialog=function(e){var t=document.createElement("input");t.style.display="none",t.type="file",t.name="file",t.accept=".json, .csv",t.onchange=e,t.click(),t.remove()},a.handleDataFiles=function(e){var t=new FileReader,n=e.target.files.item(0);"application/json"===n.type?t.onload=a.handleLoadJson:"text/csv"!==n.type&&"application/vnd.ms-excel"!==n.type||(t.onload=a.handleLoadCsv),t.readAsText(e.target.files.item(0),"UTF-8")},a.handleLoadCsv=function(e){var t=e.target.result,n=wt(t);a.addBlock("Data",75,50,n)},a.handleLoadJson=function(e){var t=e.target.result,n=JSON.parse(t);a.addBlock("Data",75,50,n)},a.addBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3?arguments[3]:void 0;a.props.createBlock({type:e,props:{position:{top:25,left:25},size:{height:"Filter"===e?50:n,width:"Filter"===e?75:t}}},r)},a.updateData=function(e,t){switch(t.type){case"input":a.props.updateBlockInput(e,t.data);break;case"data":a.props.updateBlockData(e,t.data);break;case"selection":a.props.updateBlockSelection(e,t.data);break;default:return}},a.renderVisualization=function(e,t,n,o){switch(t){case"Data":return r.a.createElement(te,{id:e,data:n});case"ScatterPlot":return r.a.createElement(D,{id:e,data:n,onSelection:a.updateData});case"LineChart":return r.a.createElement(I,{id:e,data:n});case"Histogram":return r.a.createElement(F,{data:n,onSelection:a.updateData});case"Map":return r.a.createElement(X,{id:e,data:n});case"Table":return r.a.createElement(oe,{id:e,data:n,onSelection:a.updateData});case"PieChart":return r.a.createElement(de,{data:n});case"Filter":return r.a.createElement(pe,{data:n,onSelection:a.updateData});default:return r.a.createElement(r.a.Fragment,null)}},a.addInput=function(e,t){var n=a.props.blocks[e],r=a.props.blocks[t];a.props.updateBlockInput(e,t),a.props.addArrow({xi:r.props.position.left+r.props.size.width,yi:r.props.position.top+r.props.size.height/2,xe:n.props.position.left,ye:n.props.position.top+n.props.size.height/2,startBlock:r.id,endBlock:n.id})},a.renderBlock=function(e){var t,n,o=!0;return"Data"!==e.type&&"Filter"!==e.type||(o=!1,t=n=50),r.a.createElement(Ce,{key:e.id,id:e.id,dimension:e.props.dimension,top:e.props.position.top,left:e.props.position.left,width:e.props.size.width,height:e.props.size.height,minWidth:t,minHeight:n,headerVisible:o,onUpdate:a.addInput,controlRef:a.refs.controls},a.renderVisualization(e.id,e.type,e.data||Ct(e.input,a.props.dataMap),e.props))},a.renderComponents=function(){return Object.values(a.props.blocks).map(function(e){return a.renderBlock(e)})},a.handleOptionChange=function(e,t){a.props.updateAttrSelection(a.props.selectedId,e,t)},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"renderAppBar",value:function(){var e=this.props.classes;return r.a.createElement(Et.a,{position:"absolute",color:"default",className:e.appBar},r.a.createElement(St.a,{className:e.toolbar},r.a.createElement($.a,{variant:"title",color:"primary",noWrap:!0},"VisBlocks")))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},this.renderAppBar(),r.a.createElement(ct,{onCreateBlock:this.createBlock}),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement("div",{className:"workArea"},this.renderComponents(),r.a.createElement(Be,null))),r.a.createElement("div",{ref:"controls"},r.a.createElement(vt,{open:this.state.controlDrawerOpen,options:this.props.options[this.props.selectedId],onFieldChange:this.handleOptionChange})))}}]),t}(r.a.Component);At.getDerivedStateFromProps=function(e,t){var a=e.selectedId;return e.blocks[a]&&Ct(a,e.dataMap)?Object(s.a)({},t,{controlDrawerOpen:!0}):Object(s.a)({},t,{controlDrawerOpen:!1})};var xt=Object(i.b)(function(e){return{blocks:e.blocksState.blocks,dataMap:e.dataState.data,options:e.controlState.options,selectedId:e.controlState.selected}},function(e){return{addArrow:function(t){return e(function(e){return{type:"ADD_ARROW",payload:{arrow:e}}}(t))},createBlock:function(t,a){return e(function(e,t){return{type:"CREATE_BLOCK",payload:{block:e,data:t}}}(t,a))},deleteBlock:function(t){return e(v(t))},updateBlockInput:function(t,a){return e(function(e,t){return{type:"UPDATE_DATA",payload:{id:e,source:t,isInput:!0}}}(t,a))},updateBlockData:function(t,a){return e(function(e,t){return{type:"UPDATE_DATA",payload:{id:e,source:t}}}(t,a))},updateBlockSelection:function(t,a){return e(function(e,t){return{type:"UPDATE_DATA",payload:{id:e,source:t,isSelection:!0}}}(t,a))},updateAttrSelection:function(t,a,n){return e(k(t,a,n))}}})(Object(he.withStyles)(function(e){return{root:{flexGrow:1,zIndex:1,overflow:"hidden",position:"relative",display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing.unit,minWidth:0},toolbar:e.mixins.toolbar}})(At));Object(o.render)(r.a.createElement(i.a,{store:p},r.a.createElement(xt,null)),document.getElementById("root"))}},[[474,1,2]]]);
//# sourceMappingURL=main.5450b859.chunk.js.map